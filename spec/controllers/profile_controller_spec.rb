require 'rails_helper'

RSpec.describe 'Profile' do

  it 'should authorize ' do
    expect(User.count).to eq(0)
    hash = {"source"=>"linkedin", "uid"=>"112215213473781910237", "email"=>"gerzog613@gmail.com", "version"=>1, "data"=>[{"name"=>"Sandra Divova", "id"=>"378564585", "public_id"=>"ADEAABaQb-kB8kUowbHRrs8URfodM0mdUQ2gSnI", "position"=>"Business Development at Devs.lt", "location"=>"Lithuania", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAMOAAAAJGY3ZmUzNmZmLTIwMzUtNDFhOC1iNTAzLTljZDY5MDFjMWE0Yw.jpg"}, {"name"=>"Luke Cervino", "id"=>"363088946", "public_id"=>"ADEAABWkTDIBPgLOtDl2eUFGhaybvxR9jkvUDp0", "position"=>"Head of Projects – Talent Acquisition at Global {M}", "location"=>"London, United Kingdom", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAILAAAAJDYzM2Q2MTkyLTdiYmItNDcyMy04MmEyLWQ1NDFmOTFiZGU4OA.jpg"}, {"name"=>"Natasha Zaharova", "id"=>"408152247", "public_id"=>"ADEAABhT6LcBBh_NwTt9jzAYUtJVRjcoRHCUoT4", "position"=>"HR Researcher - iTechArt Group", "location"=>"Belarus", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAH7AAAAJDEyOTZjNzRjLWEzMzktNDI0MC1iYzU3LTlhMTU3MzU1MWE5Ng.jpg"}, {"name"=>"Maksim Inshakov", "id"=>"474823675", "public_id"=>"ADEAABxNO_sBOcO-bYyVwKGMjmO1zBsxi8G-RQ8", "position"=>"HR Business Partner IT at various companies, KeyStaff Recruitment", "location"=>"Belarus", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAPjAAAAJDk1ZmYyNTAzLTg3M2UtNDJmMy1iOWY3LWZlNmQ4Mzk0MmY4MQ.jpg"}, {"name"=>"Hanna Novik", "id"=>"402548794", "public_id"=>"ADEAABf-aDoBURJdPLActoNoMtIsPO7S-z5eCQM", "position"=>"Marketing Specialist – Softacom Ltd.", "location"=>"Belarus", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAPTAAAAJGIxODYwNjFkLTY1MjctNGVlMi1hZjM0LWNiZGI2OWQyOWZkYw.jpg"}, {"name"=>"Alex Shestel", "id"=>"424517797", "public_id"=>"ADEAABlNoKUBUnQKUEqpjr259JlT2wDnFB3NwCA", "position"=>"software engineering, founder, business development", "location"=>"Austin, Texas Area", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAdBAAAAJGVkZjVkMTc3LTEyMjAtNGU5NC1hZDJkLTMwZTVjMzg1MWY1Yg.jpg"}, {"name"=>"Marina Kondrashonok", "id"=>"271475932", "public_id"=>"ADEAABAuZNwBjKFATlWUn7xR0pAGw7cNoYUYUQM", "position"=>"HR Manager Looking for:iOS", "location"=>"Belarus", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAWLAAAAJGE4MzAxNjY4LTExOWYtNDg5Yy1hZDA2LWQ0MWVmYmE5OGE2Mw.jpg"}, {"name"=>"Vladislav Gramovich", "id"=>"310544262", "public_id"=>"ADEAABKCh4YBcxZCxQ0axafw26JfNj215tg36oc", "position"=>"CMO at ITS Partner", "location"=>"Belarus", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAPdAAAAJDIxMzZkMDI2LWJiOTYtNGNmMi1iYjgyLWI1ZDIwNjY2NmYxNQ.jpg"}, {"name"=>"Olga Gotskaya", "id"=>"382617534", "public_id"=>"ADEAABbOR74BN1eeqUYByBys6ywkD93PYJ4dzhg", "position"=>"Looking for Mobile developer (Tallinn, Estonia)", "location"=>"Ukraine", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAdpAAAAJGFlYTkxNmY3LTg3ZTYtNDkyOC1hMmViLWY4NDM0ZjViOWFhMA.jpg"}, {"name"=>"Alex Shoub", "id"=>"186327619", "public_id"=>"ADEAAAsbIkMBBi3SfCyg58DbT1Addbath5-wX-E", "position"=>"Senior Graphic Designer at APRO Software", "location"=>"Belarus", "photo"=>"https://media.licdn.com/mpr/mpr/shrink_100_100/AAEAAQAAAAAAAAPvAAAAJDU1NTQ5YzJkLTE2ZjEtNDg1My1hOGViLTk0Mjc1YWYwM2FhNg.jpg"}], "profile"=>{}}
    page.driver.post '/people/find', hash
    expect(response.status).to eq(200)
    expect(User.count).to eq(1)
    expect(Profile.count).to eq(10)
  end
end
